<%= content_for :body_id, "users" %>

<div class="menubar fixed">
	<div class="sidebar-toggler visible-xs">
		<i class="ion-navicon"></i>
	</div>
	
	<div class="page-title">
		Invitations
	</div>
	<form class="search hidden-xs">
		<i class="fa fa-search"></i>
		<input type="text" name="q" placeholder="Search users..." />
		<input type="submit" />
	</form>
	<a href="<%= new_invitation_path %>" class="new-user btn btn-success pull-right">
		<span>Invite user</span>
	</a>
</div>

<div> There are a total of <%= @invitations.count %> active users</div>
<table class="table table-striped table-bordered table-condense">
  <thead>
    <tr>
      <th>Full Name</th>
      <th>Email</th>
      <th>Username</th>
      <th>Title</th>
      <th>Company</th>
      <th>Expires on</th>
      <th>Sender</th>
      <th colspan="1"></th>
    </tr>
  </thead>

  <tbody>
    <% @invitations.each do |invitation| %>
      <tr>
        <td><%= invitation.recipient_firstname + " " + invitation.recipient_lastname %></td>
        <td><%= invitation.recipient_email %></td>
        <td><%= invitation.recipient_username %></td>
        <td><%= invitation.recipient_title %></td>
        <td><%= invitation.recipient_company %></td>
        <td><%= (invitation.expires_at).to_date.to_formatted_s(:long) %></td>
        <% if invitation.sender.blank? %>
          <td><strong>N/A</strong></td>
        <% else %>
          <td><%= invitation.sender.display_name unless invitation.sender.blank? %></td>  
        <% end %>
        <td><%= link_to 'Delete', invitation, method: :delete, data: { confirm: 'Do you want to delete this account? The users account will permanently be deleted.' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Invitation', new_invitation_path %>
